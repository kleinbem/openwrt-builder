# --- BANANA PI BPI-R4 PROFILE ---

# Source: Official OpenWrt Snapshot (Filogic)
BUILDER_URL="https://downloads.openwrt.org/snapshots/targets/mediatek/filogic/openwrt-imagebuilder-mediatek-filogic.Linux-x86_64.tar.zst"

# Target Board ID (run 'make info' in builder to find these)
BOARD="bananapi_bpi-r4"

# --- PACKAGE DEFINITIONS ---

# 1. System Basics
PKG_CORE="base-files libc libgcc busybox dropbear mtd uci netifd fstools \
          htop tcpdump nano git curl wget-ssl python3 python3-pip"

PKG_HW="kmod-sfp kmod-hwmon-pwmfan ethtool-full pciutils usbutils \
        kmod-usb-storage kmod-fs-ext4 kmod-fs-vfat"

# 3. Network Smarts (Roaming, VPN, Metrics)
PKG_NET="hostapd-utils dawn tailscale prometheus-node-exporter-lua \
         kmod-tun kmod-wireguard kmod-ipt-nat kmod-nft-nat"

# 4. Container Support (LXC + Podman)
PKG_VIRT="lxc lxc-templates lxc-auto \
          kmod-veth kmod-macvlan \
          losetup resize2fs fdisk"

# Combined List
PACKAGES="$PKG_CORE $PKG_HW $PKG_NET $PKG_VIRT luci luci-ssl -dnsmasq dnsmasq-full"

# Services to disable on first boot (Ansible will handle them)
DISABLED_SERVICES="dnsmasq odhcpd"
